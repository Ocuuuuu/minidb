# MiniDB - 一个轻量级数据库系统

MiniDB 是一个基于 C++ 开发的轻量级数据库系统，支持基本的 SQL 查询、数据存储和索引功能。项目采用模块化设计，包含编译器、存储引擎、执行引擎等核心模块。


## 项目结构

minidb/

├── CMakeLists.txt          # 项目根目录 CMake 配置文件，用于项目编译构建管理

├── include/                # 公共头文件目录（对外暴露的接口与类型定义）

│   ├── common/             # 公共基础模块头文件

│   │   └── ...             # 包含常量定义、通用异常类、日志工具、工具函数等

│   ├── compiler/           # 编译器模块头文件

│   │   └── ...             # 包含词法分析器（Lexer）、语法分析器（Parser）、语义分析器等接口

│   ├── engine/             # 执行引擎模块头文件

│   │   └── ...             # 包含 B+树索引、表操作（增删改查）、事务管理等核心逻辑接口

│   └── storage/            # 存储模块头文件

│       └── ...             # 包含磁盘文件管理、页缓存（缓冲池）、数据持久化等接口

├── src/                    # 源文件目录（各模块的具体实现代码）

│   ├── common/             # 公共基础模块实现

│   │   └── ...             # 对应 include/common/ 头文件的具体代码实现

│   ├── compiler/           # 编译器模块实现

│   │   └── ...             # 对应 include/compiler/ 头文件的具体代码实现（如词法/语法分析逻辑）

│   ├── engine/             # 执行引擎模块实现

│   │   └── ...             # 对应 include/engine/ 头文件的具体代码实现（如 B+树算法、表操作逻辑）

│   └── storage/            # 存储模块实现

│       └── ...             # 对应 include/storage/ 头文件的具体代码实现（如缓冲池管理、磁盘IO逻辑）

└── tests/                  # 测试代码目录（保障代码正确性与稳定性）

├── catch2/             # Catch2 测试框架依赖（用于编写和运行单元测试/集成测试）

├── compiler_tests/     # 编译器模块专项测试

│   └── ...             # 针对词法分析、语法分析等编译器子模块的测试用例

├── integration_tests/  # 集成测试

│   └── ...             # 跨模块联合测试（如编译器+执行引擎+存储的端到端流程测试）

└── unit_tests/         # 单元测试

└── ...             # 各模块独立功能的单元测试（如单个工具函数、B+树节点操作的测试）


## 功能模块

### 1. 编译器模块
- **词法分析**：将 SQL 语句转换为 Token 流。
- **语法分析**：构建抽象语法树（AST）。
- **语义分析**：验证 SQL 语义正确性。
- **查询计划**：生成执行计划。

### 2. 存储模块
- **磁盘管理**：管理数据文件的读写。
- **缓冲池**：缓存磁盘数据以提高性能。
- **页管理**：管理数据页的分配与回收。

### 3. 执行引擎模块
- **B+树索引**：支持高效的数据查询。
- **表操作**：支持表的创建、删除和修改。
- **执行计划**：执行查询计划并返回结果。

## 构建与运行

### 依赖
- CMake 3.10+
- C++17 编译器

### 构建步骤
1. 克隆项目：
   ```bash
    https://github.com/Ocuuuuu/minidb
    cd minidb
2. 生成构建文件：
   ```bash
    mkdir build && cd build
    cmake ..
3. 编译项目：
   ```bash
    make    
4. 运行主程序：
   ```bash
    ./minidb 

## 测试
1. 单元测试
    ```bash
    cd build
    make test
   
2. 集成测试
    ```bash
    ./tests/integration_tests/test_storage

## 贡献指南
1. Fork 项目并创建分支。
2. 提交代码前运行测试。
3. 提交 Pull Request。

